(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[11],{440:function(e,t,a){"use strict";var n=a(1),c=a(0),r=a(163),i=a(28),o=function(e,t){return c.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:r.a}))};o.displayName="EditOutlined",t.a=c.forwardRef(o)},441:function(e,t,a){"use strict";var n=a(1),c=a(0),r=a(429),i=a(28),o=function(e,t){return c.createElement(i.a,Object(n.a)(Object(n.a)({},e),{},{ref:t,icon:r.a}))};o.displayName="DeleteOutlined",t.a=c.forwardRef(o)},444:function(e,t,a){"use strict";var n=a(3),c=a(2),r=a(4),i=a(0),o=a(5),s=a.n(o),l=a(21),u=a(105),d=a(34),b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},m=function(e){var t,a=e.prefixCls,r=e.className,o=e.checked,l=e.onChange,u=e.onClick,m=b(e,["prefixCls","className","checked","onChange","onClick"]),j=(0,i.useContext(d.b).getPrefixCls)("tag",a),p=s()(j,(t={},Object(n.a)(t,"".concat(j,"-checkable"),!0),Object(n.a)(t,"".concat(j,"-checkable-checked"),o),t),r);return i.createElement("span",Object(c.a)({},m,{className:p,onClick:function(e){null===l||void 0===l||l(!o),null===u||void 0===u||u(e)}}))},j=a(166),p=a(167),O=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var c=0;for(n=Object.getOwnPropertySymbols(e);c<n.length;c++)t.indexOf(n[c])<0&&Object.prototype.propertyIsEnumerable.call(e,n[c])&&(a[n[c]]=e[n[c]])}return a},f=new RegExp("^(".concat(j.a.join("|"),")(-inverse)?$")),h=new RegExp("^(".concat(j.b.join("|"),")$")),g=function(e,t){var a,o=e.prefixCls,b=e.className,m=e.style,j=e.children,g=e.icon,x=e.color,y=e.onClose,v=e.closeIcon,k=e.closable,C=void 0!==k&&k,P=O(e,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]),S=i.useContext(d.b),w=S.getPrefixCls,_=S.direction,E=i.useState(!0),T=Object(r.a)(E,2),N=T[0],I=T[1];i.useEffect((function(){"visible"in P&&I(P.visible)}),[P.visible]);var A=function(){return!!x&&(f.test(x)||h.test(x))},D=Object(c.a)({backgroundColor:x&&!A()?x:void 0},m),F=A(),J=w("tag",o),M=s()(J,(a={},Object(n.a)(a,"".concat(J,"-").concat(x),F),Object(n.a)(a,"".concat(J,"-has-color"),x&&!F),Object(n.a)(a,"".concat(J,"-hidden"),!N),Object(n.a)(a,"".concat(J,"-rtl"),"rtl"===_),a),b),R=function(e){e.stopPropagation(),null===y||void 0===y||y(e),e.defaultPrevented||"visible"in P||I(!1)},q="onClick"in P||j&&"a"===j.type,K=Object(l.a)(P,["visible"]),z=g||null,U=z?i.createElement(i.Fragment,null,z,i.createElement("span",null,j)):j,B=i.createElement("span",Object(c.a)({},K,{ref:t,className:M,style:D}),U,C?v?i.createElement("span",{className:"".concat(J,"-close-icon"),onClick:R},v):i.createElement(u.a,{className:"".concat(J,"-close-icon"),onClick:R}):null);return q?i.createElement(p.a,null,B):B},x=i.forwardRef(g);x.displayName="Tag",x.CheckableTag=m;t.a=x},457:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return c}));var n={text:"Teks",number:"Angka",option:"Opsi / Pilihan"},c={administrator:"Administrator",program_chief:"Kepala Program Studi",chief:"Kepala Jurusan",director:"Direktur",vice_director:"Wakil Direktur",head_team:"Tim Akreditasi Institusi",program_team:"Tim Akreditasi Program Studi"}},523:function(e,t,a){"use strict";a.r(t);var n=a(45),c=a(38),r=a(0),i=a(175),o=a(413),s=a(444),l=a(53),u=a(76),d=a(479),b=a(410),m=a(490),j=a(440),p=a(441),O=a(415),f=a(409),h=a(494),g=a(406),x=a(432),y=a(495),v=a(161),k=a(104),C=a(6),P=f.a.useForm,S=f.a.Item,w=function(e){var t=e.visible,a=e.onCancel,i=e.onSubmit,o=e.onOpen,s=e.user,l=Object(r.useState)(!1),d=Object(c.a)(l,2),b=d[0],m=d[1],j=Object(r.useState)([]),p=Object(c.a)(j,2),w=p[0],_=p[1],E=Object(r.useState)(void 0),T=Object(c.a)(E,2),N=T[0],I=T[1],A=Object(v.a)().models.Department,D=Object(k.a)().errorCatch,F=P(),J=Object(c.a)(F,1)[0],M=Object(r.useMemo)((function(){return"undefined"!==typeof s}),[s]),R=Object(r.useCallback)((function(){J.resetFields(["name","username","password","type","department"]),m(!1)}),[J]),q=Object(r.useCallback)((function(e){m(!0),i(e,R)}),[i,R]);Object(r.useEffect)((function(){"undefined"!==typeof s&&J.setFieldsValue({name:s.name,username:s.username,type:s.type})}),[s,J]);var K=Object(r.useCallback)((function(){A.collection({attributes:["name"],include:[{model:"StudyProgram",attributes:["name","id"]}]}).then((function(e){_(e.rows)})).catch(D)}),[A,D]);Object(r.useEffect)((function(){return K()}),[K]);var z=Object(r.useCallback)((function(e,t){I(t.type)}),[]);return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(u.a,{style:{marginBottom:12},onClick:o,children:"Tambah Pengguna"}),Object(C.jsx)(h.a,{visible:t,onCancel:a,title:M?"Edit ".concat(s.name):"Tambah Pengguna",footer:null,children:Object(C.jsxs)(f.a,{onValuesChange:z,onFinish:b?void 0:q,form:J,layout:"vertical",children:[Object(C.jsx)(S,{name:"name",rules:[{required:!0,message:"Masukkan nama pengguna"}],label:"Nama",children:Object(C.jsx)(g.a,{prefix:b&&Object(C.jsx)(O.a,{spin:!0}),placeholder:"Nama"})}),Object(C.jsx)(S,{name:"username",rules:[{required:!0,message:"Masukkan username"}],label:"Username",children:Object(C.jsx)(g.a,{prefix:b&&Object(C.jsx)(O.a,{spin:!0}),placeholder:"Username"})}),Object(C.jsx)(S,{name:"password",rules:[{required:!M,message:"Masukkan password"}],label:"Password",children:Object(C.jsx)(g.a.Password,{prefix:b&&Object(C.jsx)(O.a,{spin:!0}),placeholder:"Password"})}),Object(C.jsx)(S,{name:"type",rules:[{required:!0,message:"Pilih tipe pengguna"}],label:"Tipe pengguna",children:Object(C.jsxs)(x.a,{loading:b,placeholder:"Tipe pengguna",allowClear:!0,showSearch:!0,optionFilterProp:"children",children:[Object(C.jsx)(x.a.Option,{value:"director",children:"Direktur"}),Object(C.jsx)(x.a.Option,{value:"vice_director",children:"Wakil Direktur"}),Object(C.jsx)(x.a.Option,{value:"chief",children:"Kepala Jurusan"}),Object(C.jsx)(x.a.Option,{value:"program_chief",children:"Kepala Program Studi"}),Object(C.jsx)(x.a.Option,{value:"head_team",children:"Tim Akreditasi Institusi"}),Object(C.jsx)(x.a.Option,{value:"program_team",children:"Tim Akreditasi Program Studi"}),Object(C.jsx)(x.a.Option,{value:"administrator",children:"Administrator"})]})}),["program_team","program_chief","chief"].includes(N)&&Object(C.jsx)(S,{name:"department",rules:[{required:!0,message:"Pilih jurusan"}],label:"Jurusan",children:Object(C.jsx)(y.a,{placeholder:"Pilih Jurusan/Program Studi",options:w.map((function(e){return Object(n.a)({label:e.name,value:e.id},"chief"!==N?{children:e.study_programs.map((function(e){return{label:e.name,value:e.id}}))}:{})}))})}),Object(C.jsx)(S,{children:M?Object(C.jsx)(u.a,{htmlType:"submit",type:"primary",loading:b,children:"Simpan"}):Object(C.jsx)(u.a,{htmlType:"submit",loading:b,children:"Tambah Pengguna"})})]})})]})},_=a(457),E=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),a=t[0],f=t[1],h=Object(r.useState)({rows:[],count:0}),g=Object(c.a)(h,2),x=g[0],y=g[1],P=Object(r.useState)(void 0),S=Object(c.a)(P,2),E=S[0],T=S[1],N=Object(r.useState)(1),I=Object(c.a)(N,2),A=I[0],D=I[1],F=Object(r.useState)(10),J=Object(c.a)(F,2),M=J[0],R=J[1],q=Object(r.useState)(!0),K=Object(c.a)(q,2),z=K[0],U=K[1],B=Object(v.a)().models.User,H=Object(k.a)().errorCatch;document.title="Dashboard - Pengguna";var V=Object(r.useCallback)((function(){U(!0);var e=(A-1)*M;B.collection({attributes:["name","username","type","department_id","study_program_id"],include:[{model:"Department",attributes:["name"]},{model:"StudyProgram",attributes:["name"]}],limit:M,offset:e}).then((function(e){U(!1),y(e)})).catch(H)}),[A,M,B,H]);Object(r.useEffect)((function(){V()}),[V]);var W=Object(r.useCallback)((function(e){e.delete().then((function(e){i.b.success("Pengguna ".concat(e.name," berhasil dihapus")),V()})).catch(H)}),[H,V]),$=Object(r.useMemo)((function(){return[{title:"Nama",key:"name",dataIndex:"name"},{title:"Username",key:"username",dataIndex:"username"},{title:"Tipe Pengguna",key:"type",dataIndex:"type",render:function(e,t){return Object(C.jsxs)(o.b,{children:[Object(C.jsx)(s.a,{color:"blue",children:_.b[e]}),null!==t.department&&Object(C.jsx)(s.a,{color:"geekblue",children:t.department.name}),null!==t.study_program&&Object(C.jsx)(s.a,{color:"success",children:t.study_program.name})]})}},{title:"Edit | Hapus",key:"action",render:function(e){return Object(C.jsxs)(o.b,{children:[Object(C.jsx)(l.a,{title:"Edit ".concat(e.name),children:Object(C.jsx)(u.a,{onClick:function(){f(!0),T(e)},size:"small",icon:Object(C.jsx)(j.a,{})})}),Object(C.jsx)(l.a,{title:"Hapus ".concat(e.name),children:Object(C.jsx)(d.a,{title:"Apakah Anda yakin ingin menghapus ".concat(e.name,"?"),okText:"Hapus",cancelText:"Batal",okButtonProps:{danger:!0,type:"primary"},onConfirm:function(){return W(e)},placement:"topRight",children:Object(C.jsx)(u.a,{size:"small",type:"primary",danger:!0,icon:Object(C.jsx)(p.a,{})})})})]})}}]}),[W]),G=Object(r.useCallback)((function(e,t){B.create(Object(n.a)(Object(n.a)({},e),"chief"===e.type?{department_id:e.department[0]}:["program_chief","program_team"].includes(e.type)?{department_id:e.department[0],study_program_id:e.department[1]}:{})).then((function(e){i.b.success("Pengguna ".concat(e.name," berhasil ditambah")),V(),t(),f(!1)})).catch(H)}),[B,V,H]);return Object(C.jsxs)("div",{children:[Object(C.jsx)(b.a.Title,{level:5,children:"Pengguna"}),Object(C.jsx)(w,{visible:a,onCancel:function(){f(!1),T(void 0)},onOpen:function(){return f(!0)},onSubmit:G,user:E}),Object(C.jsx)(m.a,{dataSource:x.rows,rowKey:function(e){return"".concat(e.id)},columns:$,bordered:!0,pagination:{current:A,onChange:D,pageSize:M,onShowSizeChange:function(e,t){return R(t)},total:x.count},loading:{indicator:Object(C.jsx)(O.a,{spin:z}),spinning:z,tip:"Mengambil data user"}})]})};t.default=function(){return Object(C.jsx)(E,{})}}}]);
//# sourceMappingURL=11.194b2aba.chunk.js.map